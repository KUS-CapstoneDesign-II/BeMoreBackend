/**
 * BehavioralTaskRecommender - í–‰ë™ ê³¼ì œ ì¶”ì²œ ì‹œìŠ¤í…œ
 *
 * í–‰ë™ ê³¼ì œ ì›ì¹™:
 * 1. êµ¬ì²´ì  - ì¸¡ì • ê°€ëŠ¥í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥
 * 2. ì ì§„ì  - ìž‘ì€ ë‹¨ê³„ë¶€í„° ì‹œìž‘
 * 3. ì•ˆì „í•¨ - ë‚´ë‹´ìžì—ê²Œ ë¶€ë‹´ ì—†ëŠ” ìˆ˜ì¤€
 * 4. ì¼ìƒì  - ì¼ìƒì—ì„œ ì‹¤ì²œ ê°€ëŠ¥
 * 5. ê¸°ë¡ - ê³¼ì œ ìˆ˜í–‰ í›„ ê¸°ë¡ ê¶Œìž¥
 *
 * Phase 3 í•µì‹¬ ê¸°ëŠ¥:
 * - ì¸ì§€ ì™œê³¡ ìœ í˜•ë³„ ë§žì¶¤ ê³¼ì œ
 * - ë‚œì´ë„ ì¡°ì ˆ (easy/medium/hard)
 * - ì‹¤ì²œ ê°€ëŠ¥í•œ êµ¬ì²´ì  í–‰ë™
 */

class BehavioralTaskRecommender {
  constructor() {
    // ì™œê³¡ ìœ í˜•ë³„ í–‰ë™ ê³¼ì œ ë°ì´í„°ë² ì´ìŠ¤
    this.taskDatabase = this._initializeTaskDatabase();

    console.log('ðŸ“‹ BehavioralTaskRecommender ì´ˆê¸°í™” ì™„ë£Œ');
    console.log(`   - ê³¼ì œ ì¹´í…Œê³ ë¦¬: ${Object.keys(this.taskDatabase).length}ê°œ`);
  }

  /**
   * ì™œê³¡ ìœ í˜•ë³„ í–‰ë™ ê³¼ì œ ë°ì´í„°ë² ì´ìŠ¤
   */
  _initializeTaskDatabase() {
    return {
      catastrophizing: [
        {
          title: "ìµœì•… vs í˜„ì‹¤ ë¹„êµí•˜ê¸°",
          description: "ê±±ì •ë˜ëŠ” ìƒí™©ì˜ 'ìµœì•…ì˜ ê²°ê³¼'ì™€ 'í˜„ì‹¤ì ìœ¼ë¡œ ì¼ì–´ë‚  ê²°ê³¼'ë¥¼ ì¢…ì´ì— ì ì–´ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ê³¼ë„í•œ ê±±ì •ê³¼ í˜„ì‹¤ì˜ ì°¨ì´ ì¸ì‹",
          instructions: [
            "ê±±ì •ë˜ëŠ” ìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì ê¸°",
            "ìµœì•…ì˜ ì‹œë‚˜ë¦¬ì˜¤ ì ê¸°",
            "ì‹¤ì œë¡œ ì¼ì–´ë‚  ê°€ëŠ¥ì„± ìžˆëŠ” ê²°ê³¼ ì ê¸°",
            "ë‘ ê°€ì§€ë¥¼ ë¹„êµí•˜ê³  ì°¨ì´ì  ë°œê²¬í•˜ê¸°"
          ]
        },
        {
          title: "ê³¼ê±° ê±±ì • íšŒê³ í•˜ê¸°",
          description: "ê³¼ê±°ì— í¬ê²Œ ê±±ì •í–ˆë˜ ì¼ë“¤ì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë˜ì—ˆëŠ”ì§€ ê¸°ë¡í•´ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "15ë¶„",
          expectedEffect: "ê±±ì •ì˜ ë¹„í˜„ì‹¤ì„± ê²½í—˜ì  í•™ìŠµ",
          instructions: [
            "ìµœê·¼ 6ê°œì›”ê°„ í¬ê²Œ ê±±ì •í–ˆë˜ ì¼ 3ê°€ì§€ ì ê¸°",
            "ê° ê±±ì •ì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë˜ì—ˆëŠ”ì§€ ì ê¸°",
            "ì˜ˆìƒê³¼ í˜„ì‹¤ì˜ ì°¨ì´ ë¹„êµí•˜ê¸°"
          ]
        }
      ],
      'all-or-nothing': [
        {
          title: "ì¤‘ê°„ ì§€ëŒ€ ì°¾ê¸°",
          description: "ì™„ë²½ê³¼ ì‹¤íŒ¨ ì‚¬ì´ì˜ ì¤‘ê°„ ë‹¨ê³„ë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "í‘ë°±ë…¼ë¦¬ ê·¹ë³µ, ì—°ì†ì„ ìƒ ì‚¬ê³  ì—°ìŠµ",
          instructions: [
            "í‰ê°€í•˜ê³  ì‹¶ì€ ìƒí™©ì´ë‚˜ ê³¼ì œ ì •í•˜ê¸°",
            "0ì (ì™„ì „ ì‹¤íŒ¨)ë¶€í„° 100ì (ì™„ë²½) ì²™ë„ ê·¸ë¦¬ê¸°",
            "20ì , 40ì , 60ì , 80ì ì— í•´ë‹¹í•˜ëŠ” êµ¬ì²´ì  ìƒí™© ì ê¸°",
            "ìžì‹ ì˜ í˜„ìž¬ ìœ„ì¹˜ í‘œì‹œí•˜ê¸°"
          ]
        },
        {
          title: "ë¶€ë¶„ ì„±ê³µ ì¸ì •í•˜ê¸°",
          description: "ì˜¤ëŠ˜ í•˜ë£¨ ë™ì•ˆ ë¶€ë¶„ì ìœ¼ë¡œ ì„±ê³µí•œ ì¼ 3ê°€ì§€ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê°€ì¹˜ ìžˆìŒì„ ì¸ì‹",
          instructions: [
            "ì˜¤ëŠ˜ í•œ ì¼ë“¤ ë‚˜ì—´í•˜ê¸°",
            "ê° ì¼ì—ì„œ ìž˜í•œ ë¶€ë¶„ ì°¾ê¸°",
            "ë¶€ì¡±í•œ ë¶€ë¶„ë„ ì¸ì •í•˜ë˜, ìž˜í•œ ë¶€ë¶„ì— ì§‘ì¤‘í•˜ê¸°"
          ]
        }
      ],
      overgeneralization: [
        {
          title: "ë°˜ë¡€ ì°¾ê¸°",
          description: "'í•­ìƒ', 'ì ˆëŒ€'ë¼ëŠ” ìƒê°ì— ë°˜ëŒ€ë˜ëŠ” ì˜ˆì‹œë¥¼ ì°¾ì•„ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ê³¼ìž‰ì¼ë°˜í™” ì¸ì‹ ë° ìˆ˜ì •",
          instructions: [
            "'í•­ìƒ ì‹¤íŒ¨í•œë‹¤' ê°™ì€ ì¼ë°˜í™” ë¬¸ìž¥ ì ê¸°",
            "ê·¸ ë°˜ëŒ€ì˜ ê²½í—˜ ìµœì†Œ 3ê°€ì§€ ì°¾ê¸°",
            "ì˜ˆì™¸ê°€ ì¡´ìž¬í•¨ì„ ì¸ì •í•˜ê¸°"
          ]
        },
        {
          title: "ì •í™•í•œ í‘œí˜„ ì—°ìŠµ",
          description: "'í•­ìƒ', 'ì ˆëŒ€' ëŒ€ì‹  êµ¬ì²´ì  ë¹ˆë„ë¡œ í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ì •í™•í•œ ì–¸ì–´ ì‚¬ìš© ìŠµê´€ í˜•ì„±",
          instructions: [
            "ìžì£¼ ì‚¬ìš©í•˜ëŠ” ê³¼ìž‰ì¼ë°˜í™” í‘œí˜„ ì ê¸°",
            "ì‹¤ì œ ë¹ˆë„ ê³„ì‚°í•˜ê¸° (10ë²ˆ ì¤‘ ëª‡ ë²ˆ?)",
            "ì •í™•í•œ í‘œí˜„ìœ¼ë¡œ ë‹¤ì‹œ ì“°ê¸°"
          ]
        }
      ],
      'mental-filter': [
        {
          title: "ê¸ì • ì¼ê¸° ì“°ê¸°",
          description: "ì˜¤ëŠ˜ í•˜ë£¨ ì¤‘ ì¢‹ì•˜ë˜ ì¼ 3ê°€ì§€ë¥¼ ê¸°ë¡í•˜ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ê¸ì •ì  ì¸¡ë©´ì— ì£¼ì˜ ê¸°ìš¸ì´ê¸°",
          instructions: [
            "ì•„ë¬´ë¦¬ ìž‘ì€ ì¼ì´ë¼ë„ ì¢‹ì•˜ë˜ ì¼ ì°¾ê¸°",
            "ì™œ ì¢‹ì•˜ëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì ê¸°",
            "ë§¤ì¼ ì €ë… ì‹¤ì²œí•˜ê¸°"
          ]
        },
        {
          title: "ì „ì²´ ê·¸ë¦¼ ê·¸ë¦¬ê¸°",
          description: "í•œ ìƒí™©ì˜ ê¸ì •ì /ë¶€ì •ì  ì¸¡ë©´ì„ ê· í˜•ìžˆê²Œ ë‚˜ì—´í•´ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "20ë¶„",
          expectedEffect: "ê· í˜•ìž¡ížŒ ì‹œê° ì—°ìŠµ",
          instructions: [
            "ë¶„ì„í•  ìƒí™© ì„ íƒí•˜ê¸°",
            "ê¸ì •ì  ì¸¡ë©´ ìµœì†Œ 5ê°€ì§€ ì ê¸°",
            "ë¶€ì •ì  ì¸¡ë©´ ìµœì†Œ 5ê°€ì§€ ì ê¸°",
            "ì „ì²´ì ìœ¼ë¡œ ë´¤ì„ ë•Œì˜ í‰ê°€ ì ê¸°"
          ]
        }
      ],
      'disqualifying-positive': [
        {
          title: "ì„±ê³µ ì¸ì • ì—°ìŠµ",
          description: "ìžì‹ ì˜ ì„±ê³µì„ ì¸ì •í•˜ê³  ê·¸ ì´ìœ ë¥¼ ë¶„ì„í•´ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ê¸ì •ì  ê²½í—˜ì˜ ì˜ë¯¸ ìž¬í‰ê°€",
          instructions: [
            "ìµœê·¼ ìž˜í•œ ì¼ í•˜ë‚˜ ì„ íƒí•˜ê¸°",
            "ìš´ì´ ì•„ë‹Œ ë‚´ ë…¸ë ¥ê³¼ ëŠ¥ë ¥ìœ¼ë¡œ ê°€ëŠ¥í–ˆë˜ ë¶€ë¶„ ì°¾ê¸°",
            "êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ëŠ¥ë ¥ì´ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ ì ê¸°"
          ]
        },
        {
          title: "ì¹­ì°¬ ë°›ì•„ë“¤ì´ê¸°",
          description: "ë‹¤ë¥¸ ì‚¬ëžŒì˜ ì¹­ì°¬ì„ ë¶€ì •í•˜ì§€ ì•Šê³  ë°›ì•„ë“¤ì´ëŠ” ì—°ìŠµì„ í•˜ì„¸ìš”.",
          difficulty: "easy",
          duration: "ì¼ìƒ ì¤‘",
          expectedEffect: "ê¸ì •ì  í”¼ë“œë°± ìˆ˜ìš© ëŠ¥ë ¥ í–¥ìƒ",
          instructions: [
            "ì¹­ì°¬ì„ ë“¤ìœ¼ë©´ 'ê°ì‚¬í•©ë‹ˆë‹¤'ë¼ê³  ë‹µí•˜ê¸°",
            "ë¶€ì •í•˜ê±°ë‚˜ ì¶•ì†Œí•˜ì§€ ì•Šê¸°",
            "ì¹­ì°¬ì˜ ë‚´ìš©ì„ ê¸°ë¡í•˜ê¸°"
          ]
        }
      ],
      'jumping-to-conclusions': [
        {
          title: "ì¦ê±° ìˆ˜ì§‘í•˜ê¸°",
          description: "ì¶”ì¸¡í•˜ê¸° ì „ì— ì‹¤ì œ ì¦ê±°ë¥¼ ì°¾ì•„ë³´ëŠ” ì—°ìŠµì„ í•˜ì„¸ìš”.",
          difficulty: "medium",
          duration: "20ë¶„",
          expectedEffect: "ì‚¬ì‹¤ê³¼ ì¶”ì¸¡ êµ¬ë¶„ ëŠ¥ë ¥ í–¥ìƒ",
          instructions: [
            "ê±±ì •ë˜ëŠ” ì¶”ì¸¡ í•˜ë‚˜ ì •í•˜ê¸°",
            "ê·¸ ì¶”ì¸¡ì„ ë’·ë°›ì¹¨í•˜ëŠ” ì¦ê±° ì°¾ê¸°",
            "ë°˜ëŒ€ë˜ëŠ” ì¦ê±°ë„ ì°¾ê¸°",
            "ì¦ê±°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìž¬í‰ê°€í•˜ê¸°"
          ]
        },
        {
          title: "í™•ì¸í•˜ê¸° ì—°ìŠµ",
          description: "ìƒëŒ€ë°©ì˜ ìƒê°ì„ ì¶”ì¸¡í•˜ëŠ” ëŒ€ì‹  ì§ì ‘ ë¬¼ì–´ë³´ì„¸ìš”.",
          difficulty: "hard",
          duration: "ì¼ìƒ ì¤‘",
          expectedEffect: "ë…ì‹¬ìˆ  ì˜¤ë¥˜ ê·¹ë³µ",
          instructions: [
            "ìƒëŒ€ì˜ ìƒê°ì„ ì¶”ì¸¡í•˜ê²Œ ë˜ë©´ ì¸ì‹í•˜ê¸°",
            "ê°€ëŠ¥í•˜ë©´ ì§ì ‘ ë¬¼ì–´ë³´ê¸°",
            "ì¶”ì¸¡ê³¼ ì‹¤ì œì˜ ì°¨ì´ ê¸°ë¡í•˜ê¸°"
          ]
        }
      ],
      magnification: [
        {
          title: "ì²™ë„í™” ì—°ìŠµ",
          description: "ë¬¸ì œì˜ í¬ê¸°ë¥¼ 0-10 ì²™ë„ë¡œ í‰ê°€í•´ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ë¬¸ì œì˜ ì‹¤ì œ í¬ê¸° ê°ê´€í™”",
          instructions: [
            "í¬ê²Œ ëŠê»´ì§€ëŠ” ë¬¸ì œ ì„ íƒí•˜ê¸°",
            "0ì (ì „í˜€ ë¬¸ì œ ì•„ë‹˜) ~ 10ì (ì¸ìƒ ìµœëŒ€ ìœ„ê¸°) ì²™ë„ì— í‘œì‹œ",
            "1ë…„ í›„ ì´ ë¬¸ì œëŠ” ëª‡ ì ì¼ì§€ ì˜ˆìƒí•˜ê¸°",
            "ì‹¤ì œ í¬ê¸° ìž¬í‰ê°€í•˜ê¸°"
          ]
        },
        {
          title: "ì„±ê³µ í™•ëŒ€í•˜ê¸°",
          description: "ì„±ê³µí•œ ì¼ì„ ì¶•ì†Œí•˜ì§€ ë§ê³  ì ì ˆížˆ ì¸ì •í•˜ëŠ” ì—°ìŠµì„ í•˜ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ê· í˜•ìž¡ížŒ ìžê¸° í‰ê°€",
          instructions: [
            "ìµœê·¼ ì„±ê³µí•œ ì¼ í•˜ë‚˜ ì„ íƒí•˜ê¸°",
            "ê·¸ ì„±ê³µì´ ê°€ì ¸ì˜¨ ê¸ì •ì  ì˜í–¥ ë‚˜ì—´í•˜ê¸°",
            "ì¶•ì†Œí•˜ë ¤ëŠ” ê²½í–¥ ì¸ì‹í•˜ê³  ë©ˆì¶”ê¸°"
          ]
        }
      ],
      'emotional-reasoning': [
        {
          title: "ê°ì • vs ì‚¬ì‹¤ êµ¬ë¶„í•˜ê¸°",
          description: "ëŠë‚Œê³¼ ì‹¤ì œ ì‚¬ì‹¤ì„ ë¶„ë¦¬í•´ì„œ ê¸°ë¡í•´ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ê°ì •ê³¼ í˜„ì‹¤ êµ¬ë¶„ ëŠ¥ë ¥ í–¥ìƒ",
          instructions: [
            "ê°•í•œ ê°ì •ì´ ë“  ìƒí™© ì„ íƒí•˜ê¸°",
            "'ë‚´ ëŠë‚Œ' ëž€ì— ê°ì • ì ê¸°",
            "'ì‹¤ì œ ì‚¬ì‹¤' ëž€ì— ê°ê´€ì  ì¦ê±° ì ê¸°",
            "ë‘ ê°€ì§€ì˜ ì°¨ì´ ë¹„êµí•˜ê¸°"
          ]
        },
        {
          title: "ê°ì • ì˜¨ë„ê³„",
          description: "ê°ì •ì˜ ê°•ë„ë¥¼ ì¸¡ì •í•˜ê³  ì‹œê°„ì— ë”°ë¥¸ ë³€í™”ë¥¼ ê´€ì°°í•˜ì„¸ìš”.",
          difficulty: "easy",
          duration: "10ë¶„",
          expectedEffect: "ê°ì •ì˜ ì¼ì‹œì„± ì¸ì‹",
          instructions: [
            "í˜„ìž¬ ê°ì •ì„ 0-10 ì²™ë„ë¡œ í‘œì‹œ",
            "1ì‹œê°„ í›„ ë‹¤ì‹œ ì¸¡ì •",
            "ê°ì •ì´ ë³€í–ˆìŒì„ ê´€ì°°í•˜ê¸°"
          ]
        }
      ],
      'should-statements': [
        {
          title: "'í•´ì•¼ í•œë‹¤' â†’ '~í•˜ê³  ì‹¶ë‹¤' ë°”ê¾¸ê¸°",
          description: "ë‹¹ìœ„ì  í‘œí˜„ì„ ì„ í˜¸ í‘œí˜„ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ìœ ì—°í•œ ì‚¬ê³ ë°©ì‹ ì—°ìŠµ",
          instructions: [
            "ìžì£¼ ì“°ëŠ” '~í•´ì•¼ í•œë‹¤' ë¬¸ìž¥ 3ê°œ ì ê¸°",
            "ê°ê°ì„ '~í•˜ê³  ì‹¶ë‹¤', '~í•˜ë©´ ì¢‹ê² ë‹¤'ë¡œ ë°”ê¾¸ê¸°",
            "ëŠë‚Œì˜ ì°¨ì´ ê´€ì°°í•˜ê¸°"
          ]
        },
        {
          title: "í˜„ì‹¤ì  ê¸°ëŒ€ ì„¤ì •í•˜ê¸°",
          description: "ì™„ë²½í•œ ê¸°ì¤€ ëŒ€ì‹  í˜„ì‹¤ì ì¸ ê¸°ì¤€ì„ ì„¸ì›Œë³´ì„¸ìš”.",
          difficulty: "hard",
          duration: "20ë¶„",
          expectedEffect: "ìœ ì—°í•œ ìžê¸° ê¸°ì¤€ í˜•ì„±",
          instructions: [
            "ìžì‹ ì—ê²Œ ë¶€ê³¼í•œ 'í•´ì•¼ë§Œ í•˜ëŠ” ê²ƒ' ë‚˜ì—´í•˜ê¸°",
            "ê°ê°ì´ ì •ë§ í•„ìˆ˜ì¸ì§€ ê²€í† í•˜ê¸°",
            "ë” í˜„ì‹¤ì ì¸ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •í•˜ê¸°"
          ]
        }
      ],
      labeling: [
        {
          title: "í–‰ë™ê³¼ ì‚¬ëžŒ ë¶„ë¦¬í•˜ê¸°",
          description: "ì‹¤ìˆ˜í•œ í–‰ë™ê³¼ ìžì‹ ì„ ë¶„ë¦¬í•´ì„œ í‘œí˜„í•´ë³´ì„¸ìš”.",
          difficulty: "medium",
          duration: "15ë¶„",
          expectedEffect: "ìžì•„ì™€ í–‰ë™ êµ¬ë¶„ ì—°ìŠµ",
          instructions: [
            "'ë‚˜ëŠ” ì‹¤íŒ¨ìžì•¼' ê°™ì€ ë‚™ì¸ ì ê¸°",
            "'ë‚˜ëŠ” ì´ë²ˆì— ì‹¤ìˆ˜í–ˆë‹¤'ë¡œ ë°”ê¾¸ê¸°",
            "í–‰ë™ê³¼ ì‚¬ëžŒì´ ë‹¤ë¦„ì„ ì¸ì‹í•˜ê¸°"
          ]
        },
        {
          title: "ê°•ì  ëª©ë¡ ë§Œë“¤ê¸°",
          description: "ìžì‹ ì˜ ê¸ì •ì  íŠ¹ì„±ê³¼ ê°•ì ì„ ë‚˜ì—´í•´ë³´ì„¸ìš”.",
          difficulty: "easy",
          duration: "15ë¶„",
          expectedEffect: "ê· í˜•ìž¡ížŒ ìžê¸° ì¸ì‹",
          instructions: [
            "ìžì‹ ì˜ ì¢‹ì€ ì , ê°•ì  ìµœì†Œ 10ê°€ì§€ ì ê¸°",
            "ê° ê°•ì ì˜ êµ¬ì²´ì  ì˜ˆì‹œ ë– ì˜¬ë¦¬ê¸°",
            "ë¶€ì •ì  ë‚™ì¸ê³¼ ë¹„êµí•˜ê¸°"
          ]
        }
      ]
    };
  }

  /**
   * ì¸ì§€ ì™œê³¡ì— ë§žëŠ” í–‰ë™ ê³¼ì œ ì¶”ì²œ
   *
   * @param {Object} distortion - íƒì§€ëœ ì¸ì§€ ì™œê³¡
   * @param {string} difficulty - ë‚œì´ë„ í•„í„° (easy/medium/hard)
   * @returns {Array} ì¶”ì²œ ê³¼ì œ ëª©ë¡
   */
  recommendTasks(distortion, difficulty = null) {
    const { type } = distortion;
    const tasks = this.taskDatabase[type] || [];

    if (tasks.length === 0) {
      console.warn(`âš ï¸ ${type}ì— ëŒ€í•œ í–‰ë™ ê³¼ì œê°€ ì—†ìŠµë‹ˆë‹¤`);
      return [];
    }

    // ë‚œì´ë„ í•„í„°ë§
    let filteredTasks = difficulty
      ? tasks.filter(t => t.difficulty === difficulty)
      : tasks;

    // ìµœëŒ€ 3ê°œ ê³¼ì œ ì¶”ì²œ
    const recommendedTasks = filteredTasks.slice(0, 3).map(task => ({
      ...task,
      distortionType: type,
      distortionName: distortion.name_ko
    }));

    console.log(`âœ… í–‰ë™ ê³¼ì œ ì¶”ì²œ: ${recommendedTasks.length}ê°œ (${type})`);

    return recommendedTasks;
  }

  /**
   * ë‚œì´ë„ë³„ ê³¼ì œ ì¶”ì²œ
   */
  getTasksByDifficulty(type, difficulty) {
    const tasks = this.taskDatabase[type] || [];
    return tasks.filter(t => t.difficulty === difficulty);
  }

  /**
   * ëª¨ë“  ê³¼ì œ í†µê³„
   */
  getStats() {
    const stats = {};
    let totalTasks = 0;

    Object.entries(this.taskDatabase).forEach(([type, tasks]) => {
      stats[type] = tasks.length;
      totalTasks += tasks.length;
    });

    return {
      totalTasks,
      byDistortionType: stats
    };
  }
}

module.exports = BehavioralTaskRecommender;
